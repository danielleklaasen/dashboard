function fnResetTimer(){clearTimeout(messageTimer)}function fnShowMessage(e,n){var t=$("#message");switch(t.text(e),n){case"success":t.removeClass("error").addClass("success");break;case"error":t.className="",t.removeClass("success").addClass("error");break;default:t.className=""}t.animate({top:0},550),bTimerIsSet?(fnResetTimer(),messageTimer=setTimeout(function(){fnHideMessage()},2e3)):(messageTimer=setTimeout(function(){fnHideMessage()},2e3),bTimerIsSet=!0)}function fnHideMessage(){bTimerIsSet=!1;$("#message").animate({top:"-50px"},550)}function fnShowNotification(e,n){oSound.play();var t=document.title,r="New "+n+" received";changeTitle=setInterval(function(){fnChangeTitle(t,r)},1e3),fnShowDesktopNotification(e)}function fnChangeTitle(e,n){iterations<6?document.title===e?document.title=n:document.title=e:clearInterval(changeTitle),iterations++}function fnShowDesktopNotification(e){"granted"!==Notification.permission?Notification.requestPermission():new Notification(e).onclick=function(){fnOpenReportWdw()}}function fnGetReports(e){$.get(sUrlReports,function(n){if($.trim(n)){var t=JSON.parse(n);e;for(var r=0;r<t.length;r++){var i=t[r].id,s=t[r].status;if(-1!=$.inArray(i,aLoadedReports));else{var o=t[r].title;if(0==s){a=' <div id="'+r+'" class="text-report-card card card-1"><div class="h4 card-text">'+o+'</div><div class="card-buttons"> <img src="dist/images/arrows_circle_check.svg" alt="Accept" class="report-accept"> <img src="dist/images/arrows_circle_remove.svg" alt="Decline" class="report-decline"> </div></div>';$("#report-container").append(a)}else{if(1==s)a='<div id="'+r+'" class="text-report-card card card-1 card-accept"><div class="h4 card-text">'+o+'</div><svg class="report-delete lnr lnr-trash link"><use xlink:href="#lnr-trash"></use></svg></div>';else var a='<div id="'+r+'" class="text-report-card card card-1 card-decline"><div class="h4 card-text">'+o+'</div><svg class="report-delete lnr lnr-trash link"><use xlink:href="#lnr-trash"></use></svg></div>';$("#archive-container").append(a)}aLoadedReports.push(i)}}}else;})}var bTimerIsSet=!1,messageTimer;document.addEventListener("DOMContentLoaded",function(){Notification?"granted"!==Notification.permission&&Notification.requestPermission():console.log("Desktop notifications aren't available in your browser.")});var oSound=new Audio("audio/notification.mp3"),changeTitle,iterations=0,fnOpenWdw=function(e){var n=$("."+e);n.addClass("open"),n.fadeIn()};$(document).on("click",".open-report-wdw",function(){fnOpenReportWdw()});var fnOpenReportWdw=function(){fnCloseAllWdws(),fnOpenWdw("report-wdw"),fnSetActiveMenuItem("open-report-wdw"),fnGetPendingReports()};$(document).on("click",".open-archive-wdw",function(){fnOpenArchiveWdw()});var fnOpenArchiveWdw=function(){fnCloseAllWdws(),fnOpenWdw("archive-wdw"),fnSetActiveMenuItem("open-archive-wdw"),fnGetArchivedReports()};$(document).on("click",".menu-item",function(){fnCloseSidebar()}),$(document).on("click",".open-home",function(){fnOpenHomeWdw()});var fnOpenHomeWdw=function(){fnCloseAllWdws(),fnOpenWdw("home-wdw"),fnSetActiveMenuItem("open-home")},fnCloseAllWdws=function(){var e=$(".wdw.open");e.fadeOut(),e.removeClass("open")},fnSetActiveMenuItem=function(e){$(".menu-item").removeClass("active"),$("."+e).addClass("active")};fnOpenHomeWdw(),$(document).on("mouseover","#sidebar",function(){fnOpenSidebar()}),$(document).on("click","#sidebar",function(){fnOpenSidebar()}),$(document).on("touchstart","#sidebar",function(){fnOpenSidebar()}),$(document).on("mouseleave","#sidebar",function(){fnCloseSidebar()});var sidebar=$("#sidebar"),fnOpenSidebar=function(){sidebar.hasClass("open")||$("#sidebar").addClass("open")},fnCloseSidebar=function(){sidebar.hasClass("open")&&$("#sidebar").removeClass("open")};$(document).on("click",".close-search",function(){fnCloseSearch()}),$(document).on("click",".open-search",function(){fnOpenSearch()});var fnCloseSearch=function(){$(".search-wdw").fadeOut()},fnOpenSearch=function(){$(".search-wdw").css("display","flex").hide().fadeIn(),$("#search-input").focus()},aLoadedReports=[],sUrlReports="api/reports/api-get-reports.php",aLoadedPendingReports=[],sUrlPendingReports="api/reports/api-get-pending-reports.php",iPendingReports=0,fnSetPendingReports=function(){$(".pending-reports-num").text(iPendingReports)},fnGetPendingReports=function(){$.get(sUrlPendingReports,function(e){if($.trim(e)){for(var n=JSON.parse(e),t=0;t<n.length;t++){var r=n[t].id;if(-1!=$.inArray(r,aLoadedPendingReports));else{var i=' <div id="'+t+'" class="text-report-card card card-1"><div class="h4 card-text">'+n[t].title+'</div><div class="card-buttons"><svg class="lnr lnr-checkmark-circle report-accept link"><use xlink:href="#lnr-checkmark-circle"></use></svg><svg class="lnr lnr-cross-circle report-accept link"><use xlink:href="#lnr-cross-circle"></use></svg></div></div>';$("#report-container").append(i),aLoadedPendingReports.push(r)}}iPendingReports=aLoadedPendingReports.length,fnSetPendingReports()}else;})};setInterval(function(){fnGetPendingReports()},2e3);var aLoadedArchivedReports=[],sUrlArchivedReports="api/reports/api-get-archived-reports.php",fnGetArchivedReports=function(){$.get(sUrlArchivedReports,function(e){if($.trim(e))for(var n=JSON.parse(e),t=0;t<n.length;t++){var r=n[t].id;if(-1!=$.inArray(r,aLoadedArchivedReports));else{var i=n[t].status,s=n[t].title;if(1==i)o='<div id="'+t+'" class="text-report-card card card-1 card-accept"><div class="h4 card-text">'+s+'</div><svg class="report-delete lnr lnr-trash link"><use xlink:href="#lnr-trash"></use></svg></div>';else var o='<div id="'+t+'" class="text-report-card card card-1 card-decline"><div class="h4 card-text">'+s+'</div><svg class="report-delete lnr lnr-trash link"><use xlink:href="#lnr-trash"></use></svg></div>';$("#archive-container").append(o),aLoadedArchivedReports.push(r)}}else;})};$(document).on("click",".report-accept",function(){fnAcceptReport(this)});var fnAcceptReport=function(e){var n=e.parentNode.parentNode.id;fnSetReportStatus(n,"1")};$(document).on("click",".report-decline",function(){fnDeclineReport(this)});var fnDeclineReport=function(e){var n=e.parentNode.parentNode.id;fnSetReportStatus(n,"2")},fnRemoveCard=function(e){$("#"+e).remove()},fnShowSuccessMsg=function(e){1==e?fnShowMessage("Report accepted","success"):fnShowMessage("Report declined","error")},fnSetReportStatus=function(e,n){var t="api/reports/api-update-report.php?id="+e+"&status="+n;$.getJSON(t,function(t){"ok"==t.status&&(fnRemoveCard(e),fnShowSuccessMsg(n))})};$(document).on("click",".report-delete",function(){fnDeleteReport(this)});var fnDeleteReport=function(e){var n=e.parentNode.id;fnDeleteFromDataBase(n)},fnDeleteFromDataBase=function(e){var n="api/reports/api-delete-report.php?id="+e;$.getJSON(n,function(n){"ok"==n.status&&(fnShowMessage("Report deleted!","success"),fnRemoveCard(e),aLoadedReports.splice(e,1))})};